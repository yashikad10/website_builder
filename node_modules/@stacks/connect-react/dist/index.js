'use strict';

var C = require('react');
var connect = require('@stacks/connect');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var C__default = /*#__PURE__*/_interopDefault(C);

var _=Object.defineProperty,I=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var S=(n,e,r)=>e in n?_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,a=(n,e)=>{for(var r in e||(e={}))H.call(e,r)&&S(n,r,e[r]);if(O)for(var r of O(e))N.call(e,r)&&S(n,r,e[r]);return n},s=(n,e)=>I(n,E(e));var D={isOpen:!1,isAuthenticating:!1,authData:void 0,userSession:void 0,authOptions:{redirectTo:"",manifestPath:"",onFinish:()=>null,authOrigin:void 0,sendToSignIn:!1,appDetails:{name:"",icon:""}}},$=(n,{type:e,payload:r})=>{switch(e){case"data/update-auth-options":return s(a({},n),{authOptions:a(a({},n.authOptions),r)});default:throw new Error(`Unhandled action type: ${e}`)}},c=C.createContext(D),d=C.createContext(void 0),g=({authOptions:n,children:e})=>{let[r,t]=C.useReducer($,D);return C__default.default.createElement(c.Provider,{value:s(a({},r),{authOptions:n})},C__default.default.createElement(d.Provider,{value:t},e))};var z=({authOptions:n,children:e})=>C__default.default.createElement(g,{authOptions:n},e);var Z=()=>{let n=C.useContext(d);if(!n)throw new Error("This must be used within the ConnectProvider component.");return n},tt=()=>{let{isOpen:n,isAuthenticating:e,authData:r,authOptions:t,userSession:T}=C.useContext(c),A=Z(),m=o=>A({type:"data/update-auth-options",payload:o}),v=(o,i,u)=>{if(o){let p=s(a(a({},t),i),{onFinish:w=>{var l;(l=t.onFinish)==null||l.call(t,w);},sendToSignIn:!0});connect.authenticate(p,u);return}else connect.showBlockstackConnect(s(a({},t),{sendToSignIn:!1}));t&&m(t);},y=(o={},i)=>{connect.authenticate(s(a(a({},t),o),{onFinish:u=>{var p;(p=t.onFinish)==null||p.call(t,u);}}),i);};function R(o,i){return connect.openContractCall(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function x(o,i){return connect.openContractDeploy(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function U(o,i){return connect.openSTXTransfer(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function k(o,i){return connect.openProfileUpdateRequestPopup(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function q(o,i){return connect.openSignTransaction(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function F(o,i){return connect.openSignatureRequestPopup(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function b(o,i){return connect.openStructuredDataSignatureRequestPopup(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}function X(o,i){return connect.openPsbtRequestPopup(s(a({},o),{authOrigin:t.authOrigin,appDetails:t.appDetails}),i)}return {isOpen:n,isAuthenticating:e,authData:r,authOptions:t,userSession:T,doOpenAuth:v,doAuth:y,authenticate:connect.authenticate,doContractCall:R,doContractDeploy:x,doSTXTransfer:U,doSignTransaction:q,doProfileUpdate:k,sign:F,signStructuredData:b,signPsbt:X}};

exports.Connect = z;
exports.useConnect = tt;
Object.keys(connect).forEach(function (k) {
	if (k !== 'default' && !Object.prototype.hasOwnProperty.call(exports, k)) Object.defineProperty(exports, k, {
		enumerable: true,
		get: function () { return connect[k]; }
	});
});
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map