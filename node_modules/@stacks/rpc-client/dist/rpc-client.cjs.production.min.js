"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("bn.js")),t=require("@blockstack/stacks-transactions"),n=e(require("cross-fetch")),o=function(e){return new r(e.slice(2),16)},c=function(){function e(e){this.url=e}var r=e.prototype;return r.fetchAccount=function(e){try{return Promise.resolve(n(this.url+"/v2/accounts/"+e,{credentials:"omit"})).then((function(e){return Promise.resolve(e.json()).then((function(e){return{balance:o(e.balance),nonce:e.nonce}}))}))}catch(e){return Promise.reject(e)}},r.broadcastTX=function(e){try{return Promise.resolve(n(this.url+"/v2/transactions",{method:"POST",credentials:"omit",headers:{"Content-Type":"application/octet-stream"},body:e}))}catch(e){return Promise.reject(e)}},r.fetchContractInterface=function(e){var r=e.contractAddress,t=e.contractName;try{return Promise.resolve(n(this.url+"/v2/contracts/interface/"+r+"/"+t)).then((function(e){return Promise.resolve(e.json())}))}catch(e){return Promise.reject(e)}},r.callReadOnly=function(e){var r=e.contractName,o=e.contractAddress,c=e.functionName,s=e.args;try{var i=this.url+"/v2/contracts/call-read/"+o+"/"+r+"/"+c,u={sender:"SP31DA6FTSJX2WGTZ69SFY11BH51NZMB0ZW97B5P0",_arguments2:s.map((function(e){return"0x"+t.serializeCV(e).toString("hex")}))};return console.log(u),Promise.resolve(n(i,{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}})).then((function(e){if(!e.ok)throw new Error("Unable to call read-only function.");return Promise.resolve(e.json()).then((function(e){return console.log(e),e}))}))}catch(e){return Promise.reject(e)}},r.fetchContractSource=function(e){var r=e.contractName,t=e.contractAddress;try{return Promise.resolve(n(this.url+"/v2/contracts/source/"+t+"/"+r)).then((function(e){var r=!1,t=function(){if(e.ok)return Promise.resolve(e.json()).then((function(e){return r=!0,e.source}))}();return t&&t.then?t.then((function(e){return r?e:null})):r?t:null}))}catch(e){return Promise.reject(e)}},r.fetchAddressTransactions=function(e){var r=e.address;try{return Promise.resolve(n(this.url+"/extended/v1/address/"+r+"/transactions")).then((function(e){return Promise.resolve(e.json()).then((function(e){return e.results}))}))}catch(e){return Promise.reject(e)}},e}();exports.RPCClient=c,exports.default=c,exports.toBN=o;
//# sourceMappingURL=rpc-client.cjs.production.min.js.map
